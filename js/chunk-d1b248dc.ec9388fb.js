(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d1b248dc"],{"05c7":function(t,e,n){},"207a":function(t,e,n){"use strict";n("63b7")},"3cdd":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"calendar-day"},[n("div",{staticClass:"header d-flex flex-column justify-content-between p-2"},[n("div",{staticClass:"selector d-flex align-items-center"},[n("DaySelector",{attrs:{"inital-date":t.date}}),n("ViewSelector")],1),n("div",{staticClass:"week-list-wrapper d-flex"},[n("div",{staticStyle:{width:"80px"}},[n("div",{staticClass:"calendar-icon-wrapper d-flex justify-content-center align-items-center mt-1"},[n("font-awesome-icon",{attrs:{icon:["far","calendar"]}})],1)]),n("div",{staticClass:"week-list flex-grow-1"},[n("ol",{staticClass:"d-flex justify-content-around"},t._l(t.days,(function(e){return n("li",{key:e.date,staticClass:"d-flex flex-column justify-content-around align-items-center",class:{"is-selected-day":e.isSelectedDay},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.selectDate(e.date)}}},[n("span",{staticClass:"li-week-day"},[t._v(t._s(t._f("weekDayFormat")(e.date)))]),n("span",{staticClass:"li-date"},[t._v(t._s(t._f("dateFormat")(e.date)))])])})),0)])])]),n("div",{staticClass:"d-flex flex-nowrap"},[n("Timeline"),n("CalendarDayContent",{attrs:{"initial-schedule-data":t.scheduleData},on:{"after-edit-event":t.handleAfterEditEvent,"after-delete-event":t.handleAfterDeleteEvent}})],1),n("AddEvent",{on:{"after-submit":t.handleAfterSubmit}})],1)},i=[],r=(n("99af"),n("4de4"),n("7db0"),n("d81d"),n("45fc"),n("2909")),s=n("5a0c"),o=n.n(s),c=n("7e21"),d=n.n(c),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"day-selector d-flex justify-content-between"},[n("div",{on:{click:t.selectPrevious}},[t._v("﹤")]),n("span",{on:{click:function(e){return t.$router.push("/")}}},[t._v(t._s(t._f("dateFormat")(t.initalDate)))]),n("div",{on:{click:t.selectNext}},[t._v("﹥")])])},u=[],f={name:"CalendarDaySelector",props:{initalDate:{type:String,required:!0}},methods:{selectPrevious:function(){var t=o()(this.initalDate).subtract(1,"day").format("YYYY-MM-DD");this.$router.push({name:"calendar-day",params:{date:t}})},selectNext:function(){var t=o()(this.initalDate).add(1,"day").format("YYYY-MM-DD");this.$router.push({name:"calendar-day",params:{date:t}})}},filters:{dateFormat:function(t){return o()(t).format("YYYY / MM / DD")}}},m=f,v=(n("d69f"),n("2877")),h=Object(v["a"])(m,l,u,!1,null,"3e3fac10",null),p=h.exports,y=n("39a8"),b=n("eee8"),g=n("da9e"),D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add-event-button"},[n("button",{staticClass:"btn add-event",attrs:{type:"button","data-toggle":"modal","data-target":"#addEventSheet"}},[t._v("新增行程")]),n("div",{staticClass:"modal fade",attrs:{id:"addEventSheet",tabindex:"-1",role:"dialog","aria-labelledby":"addEventSheetLabel","aria-hidden":"true"}},[n("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[t._m(0),n("div",{staticClass:"modal-body"},[n("div",{staticClass:"form-group"},[n("label",{staticClass:"event-label mb-2 lead",attrs:{for:"event"}},[t._v("行程")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.event,expression:"event"}],staticClass:"form-control",attrs:{type:"text",id:"event",value:"event"},domProps:{value:t.event},on:{input:function(e){e.target.composing||(t.event=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"time-label mb-2 lead",attrs:{for:"time"}},[t._v("時間")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.time,expression:"time"}],staticClass:"form-control",attrs:{name:"time",id:"time"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.time=e.target.multiple?n:n[0]}}},t._l(t.times,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})),0)]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"color-title-label d-block mb-2 lead"},[t._v("選擇顏色")]),t._l(t.colors,(function(e){return n("div",{key:e.name,staticClass:"color-options-wrapper form-check form-check-inline"},[n("label",{staticClass:"color-label pr-1",attrs:{for:e.name}},[t._v(t._s(e.name_ch))]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.color,expression:"color"}],attrs:{type:"radio",name:"color",id:e.name},domProps:{value:e.name,checked:t._q(t.color,e.name)},on:{change:function(n){t.color=e.name}}})])}))],2)]),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),n("button",{staticClass:"btn btn-submit",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return e.stopPropagation(),t.handleSubmit(e)}}},[t._v("新增")])])])])])])},S=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-header"},[n("h5",{staticClass:"modal-title lead",attrs:{id:"addEventSheetLabel"}},[t._v("新增一筆行程")]),n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],_=(n("498a"),n("2fa3")),C=n("1157"),k=n.n(C),w={name:"AddEvent",data:function(){return{time:"",event:"",color:"",times:["1:00am","2:00am","3:00am","4:00am","5:00am","6:00am","7:00am","8:00am","9:00am","10:00am","11:00am","12:00pm","1:00pm","2:00pm","3:00pm","4:00pm","5:00pm","6:00pm","7:00pm","8:00pm","9:00pm","10:00pm","11:00pm","0:00pm"],colors:[{name:"pink",name_ch:"粉"},{name:"green",name_ch:"綠"},{name:"violet",name_ch:"紫"}]}},methods:{handleSubmit:function(){this.time&&this.event.trim()&&this.color?(this.$emit("after-submit",this.time,this.event,this.color),this.time="",this.event="",this.color="",k()("#addEventSheet").modal("hide")):_["a"].fire({icon:"warning",title:"請填寫所有項目"})}}},x=w,Y=(n("207a"),Object(v["a"])(x,D,S,!1,null,"32b26dc1",null)),E=Y.exports;o.a.extend(d.a);var O={name:"CalendarDay",data:function(){return{date:this.$route.params.date,scheduleData:[]}},components:{DaySelector:p,ViewSelector:y["a"],CalendarDayContent:b["a"],Timeline:g["a"],AddEvent:E},methods:{getWeekday:function(t){return o()(t).weekday()},selectDate:function(t){this.$router.push({name:"calendar-day",params:{date:t}})},fetchScheduleData:function(){var t=this,e=JSON.parse(localStorage.getItem("schedule"))||[];e.filter((function(e){return e.date===t.date})).length?this.scheduleData=Object(r["a"])(e.filter((function(e){return e.date===t.date}))[0].contents):this.scheduleData=[]},handleAfterSubmit:function(t,e,n){var a=this,i=JSON.parse(localStorage.getItem("schedule"))||[],r=i.some((function(t){return t.date===a.date}));if(r){var s=i.find((function(t){return t.date===a.date})).contents.some((function(e){return e.time===t}));s?(i.find((function(t){return t.date===a.date})).contents.find((function(e){return e.time===t})).events.push({event:e,color:n}),localStorage.setItem("schedule",JSON.stringify(i))):(i.find((function(t){return t.date===a.date})).contents.push({time:t,events:[{event:e,color:n}]}),localStorage.setItem("schedule",JSON.stringify(i)))}else i.push({date:this.date,contents:[{time:t,events:[{event:e,color:n}]}]}),localStorage.setItem("schedule",JSON.stringify(i));this.fetchScheduleData()},handleAfterEditEvent:function(t,e){var n=this,a=JSON.parse(localStorage.getItem("schedule"));if(t.time===e.time)a.find((function(t){return t.date===n.date})).contents.find((function(t){return t.time===e.time})).events.find((function(t){return t.event===e.event})).color=t.color,a.find((function(t){return t.date===n.date})).contents.find((function(t){return t.time===e.time})).events.find((function(t){return t.event===e.event})).event=t.event,localStorage.setItem("schedule",JSON.stringify(a));else{a.find((function(t){return t.date===n.date})).contents.find((function(t){return t.time===e.time})).events=a.find((function(t){return t.date===n.date})).contents.find((function(t){return t.time===e.time})).events.filter((function(t){return t.event!==e.event}));var i=a.find((function(t){return t.date===n.date})).contents.some((function(e){return e.time===t.time}));i?a.find((function(t){return t.date===n.date})).contents.find((function(e){return e.time===t.time})).events.push({event:t.event,color:t.color}):a.find((function(t){return t.date===n.date})).contents.push({time:t.time,events:[{event:t.event,color:t.color}]}),localStorage.setItem("schedule",JSON.stringify(a))}this.fetchScheduleData()},handleAfterDeleteEvent:function(t){var e=this,n=JSON.parse(localStorage.getItem("schedule"));n.find((function(t){return t.date===e.date})).contents.find((function(e){return e.time===t.time})).events=n.find((function(t){return t.date===e.date})).contents.find((function(e){return e.time===t.time})).events.filter((function(e){return e.event!==t.event}));var a=n.find((function(t){return t.date===e.date})).contents.find((function(e){return e.time===t.time})).events.length;a||(n.find((function(t){return t.date===e.date})).contents=n.find((function(t){return t.date===e.date})).contents.filter((function(e){return e.time!==t.time})));var i=n.find((function(t){return t.date===e.date})).contents.length;i||(n=n.filter((function(t){return t.date!==e.date}))),localStorage.setItem("schedule",JSON.stringify(n)),this.fetchScheduleData()}},created:function(){this.fetchScheduleData()},watch:{date:function(){this.fetchScheduleData()}},computed:{thisWeekPreviousDay:function(){var t=this,e=this.getWeekday(this.date)?this.getWeekday(this.date)-1:6;return Object(r["a"])(Array(e)).map((function(n,a){return{date:o()(t.date).subtract(e-a,"day").format("YYYY-MM-DD"),isSelectedDay:!1}}))},thisDay:function(){return{date:o()(this.date).format("YYYY-MM-DD"),isSelectedDay:!0}},thisWeekNextDay:function(){var t=this,e=this.getWeekday(this.date)?7-this.getWeekday(this.date):0;return Object(r["a"])(Array(e)).map((function(e,n){return{date:o()(t.date).add(n+1,"day").format("YYYY-MM-DD"),isSelectedDay:!1}}))},days:function(){return[].concat(Object(r["a"])(this.thisWeekPreviousDay),[this.thisDay],Object(r["a"])(this.thisWeekNextDay))}},beforeRouteUpdate:function(t,e,n){var a=t.params.date;this.date=a,n()},filters:{dateFormat:function(t){return o()(t).format("DD")},weekDayFormat:function(t){switch(o()(t).format("ddd")){case"Sun":return"S";case"Mon":return"M";case"Tue":return"T";case"Wed":return"W";case"Thu":return"T";case"Fri":return"F";case"Sat":return"S"}}}},N=O,A=(n("d126"),Object(v["a"])(N,a,i,!1,null,"03a0c6b9",null));e["default"]=A.exports},"45fc":function(t,e,n){"use strict";var a=n("23e7"),i=n("b727").some,r=n("a640"),s=n("ae40"),o=r("some"),c=s("some");a({target:"Array",proto:!0,forced:!o||!c},{some:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"63b7":function(t,e,n){},"7db0":function(t,e,n){"use strict";var a=n("23e7"),i=n("b727").find,r=n("44d2"),s=n("ae40"),o="find",c=!0,d=s(o);o in[]&&Array(1)[o]((function(){c=!1})),a({target:"Array",proto:!0,forced:c||!d},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(o)},9912:function(t,e,n){},d126:function(t,e,n){"use strict";n("05c7")},d69f:function(t,e,n){"use strict";n("9912")}}]);
//# sourceMappingURL=chunk-d1b248dc.ec9388fb.js.map